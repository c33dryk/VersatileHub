# =============================================================================
# VERSATILE HUB - Configuración de Entorno
# =============================================================================
# 
# MODELO DE DESPLIEGUE:
# VersatileHub es una infraestructura que se despliega DESDE CERO en el
# entorno del cliente. No requiere migración de servicios existentes.
#
# DOCKER COMPOSE:
# - Existe un docker-compose.yml unificado en la raíz que levanta todos
#   los servicios coordinadamente (agent, chat, hub, flow)
# - Futuro: docker-compose individuales por servicio si se requiere
#   despliegue selectivo
#
# LAB/SPEC:
# - lab/spec/ contiene el sistema de gestión de contratos de desarrollo
# - Workflow: REQ → ANA → CONT → Desarrollo → Deploy
# - Ver: lab/spec/contracts-workflow.md
#
# CONFIGURACIÓN:
# 1. Copiar este archivo: cp .env.example .env
# 2. Generar secretos: openssl rand -hex 32
# 3. Configurar dominios del cliente
# 4. Agregar API keys y credenciales
#
# =============================================================================

# === GENERAL ===
PROJECT_NAME=versatile-hub
ENVIRONMENT=production
TZ=America/Argentina/Buenos_Aires

# === TRAEFIK ===
CERT_RESOLVER=cloudflare
# Si usas Let's Encrypt HTTP challenge, cambiar a "letsencrypt"

# === DOMINIOS ===
# Cambiar según tu dominio real
AGENT_DOMAIN=agent.versatilehub.app
CHAT_DOMAIN=chat.versatilehub.app
CHAT_BRIDGE_DOMAIN=chat-bridge.versatilehub.app
HUB_DOMAIN=altamira.versatilehub.appALTAMIRA_DOMAIN=altamira.versatilehub.appFLOW_DOMAIN=flow.versatilehub.app

# =============================================================================
# AGENT SERVICE (OpenClaw)
# =============================================================================

# --- LLM API Keys ---
# Requerido al menos una (Anthropic o OpenAI)
AGENT_ANTHROPIC_API_KEY=sk-ant-api03-xxxxxxxxxxxxxxxxxxxxxxxxxxxxx
AGENT_OPENAI_API_KEY=

# --- Gateway Token ---
# Generar con: openssl rand -hex 32
AGENT_GATEWAY_TOKEN=your_gateway_token_here_32_chars_minimum

# --- Telegram Bot (Opcional) ---
AGENT_TELEGRAM_BOT_TOKEN=
AGENT_TELEGRAM_ALLOWED_USERS=

# =============================================================================
# CHAT SERVICE (Chatwoot)
# =============================================================================

# --- Base de Datos ---
CHAT_POSTGRES_USER=chatwoot
CHAT_POSTGRES_PASSWORD=changeme_secure_password_here
CHAT_POSTGRES_DB=chatwoot_production

# --- Rails Secrets ---
# Generar con: openssl rand -hex 64
CHAT_SECRET_KEY_BASE=changeme_generate_with_openssl_rand_hex_64

# --- Configuración General ---
CHAT_DEFAULT_LOCALE=es
CHAT_ACCOUNT_ID=1

# --- Email (SMTP) ---
CHAT_MAILER_SENDER_EMAIL=chat@versatilehub.app
CHAT_SMTP_ADDRESS=smtp.gmail.com
CHAT_SMTP_PORT=587
CHAT_SMTP_USERNAME=your-email@gmail.com
CHAT_SMTP_PASSWORD=your-app-password
CHAT_SMTP_AUTHENTICATION=plain

# --- Chatwoot API ---
# Se genera después del primer login en Chatwoot
# Settings > Account > API Access Token
CHAT_API_ACCESS_TOKEN=

# =============================================================================
# HUB SERVICE (Frappe/ERPNext) - Base para desarrollo
# =============================================================================

# --- Sitio ---
HUB_SITE_NAME=hub.versatilehub.app

# --- Base de Datos ---
HUB_DB_ROOT_PASSWORD=changeme_secure_mariadb_password

# =============================================================================
# ALTAMIRA SERVICE (Frappe/ERPNext) - Para cliente/producción
# =============================================================================

# --- Sitio ---
ALTAMIRA_SITE_NAME=altamira.versatilehub.app

# --- Base de Datos ---
ALTAMIRA_DB_ROOT_PASSWORD=changeme_secure_mariadb_password_altamira

# =============================================================================
# FLOW SERVICE (Pendiente)
# =============================================================================
# TODO: Agregar variables cuando se implemente

# =============================================================================
# BACKUPS (Restic)
# =============================================================================

# --- Repositorio ---
# Ejemplos:
# - S3: s3:s3.amazonaws.com/bucket-name
# - Backblaze B2: b2:bucket-name
# - Local: /mnt/backups
RESTIC_REPOSITORY=s3:s3.amazonaws.com/versatile-hub-backups
RESTIC_PASSWORD=changeme_secure_restic_password

# --- Credenciales S3/B2 ---
AWS_ACCESS_KEY_ID=your_access_key_id
AWS_SECRET_ACCESS_KEY=your_secret_access_key

# --- Credenciales Backblaze B2 (si se usa) ---
# B2_ACCOUNT_ID=
# B2_ACCOUNT_KEY=

# =============================================================================
# MONITOREO (Opcional)
# =============================================================================

# --- Métricas ---
ENABLE_METRICS=false
METRICS_PORT=9090

# --- Healthchecks.io (Opcional) ---
# HEALTHCHECK_URL=https://hc-ping.com/your-uuid

# =============================================================================
# DESARROLLO (Solo para entornos dev)
# =============================================================================

# --- Debug ---
# DEBUG=false
# LOG_LEVEL=info

# =============================================================================
# NOTAS
# =============================================================================
# 
# 1. NUNCA commitear el archivo .env real al repositorio
# 2. Usar contraseñas fuertes (32+ caracteres)
# 3. Rotar secretos regularmente
# 4. Diferentes secretos por entorno (dev/staging/prod)
# 5. Backup del archivo .env en lugar seguro
#
# Generar secretos:
# - Password: openssl rand -base64 32
# - Token: openssl rand -hex 32
# - Rails secret: openssl rand -hex 64
#
# =============================================================================
